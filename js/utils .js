"use strict";var _createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sum(){for(var t=0,e=0;e<arguments.length;e++)t+=arguments[e];return t}function maxNum(){for(var t=arguments[0],e=0;e<arguments.length;e++)t<arguments[e]&&(t=arguments[e]);return t}function minNum(){for(var t=arguments[0],e=0;e<arguments.length;e++)arguments[e]<t&&(t=arguments[e]);return t}function randomNumber(t,e){return e<t?parseInt(Math.random()*(t-e+1)+e):parseInt(Math.random()*(e-t+1)+t)}function changeObj(t){var t=t.split("&"),e={};return t.forEach(function(t){t=t.split("=");e[t[0]]=t[1]}),e}function randomColor(){return"rgb("+randomNumber(0,255)+","+randomNumber(0,255)+","+randomNumber(0,255)+")"}function formatTime(t,e){var i=t.getFullYear(),n=10<=(n=t.getMonth()+1)?n:"0"+n,s=10<=(s=t.getDate())?s:"0"+s;return""+i+(e=e||"/")+n+e+s+"  "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"  "+["星期天","星期一","星期二","星期三","星期四","星期五","星期六"][t.getDay()]}function timeDifference(t,e){t=t.getTime(),e=e.getTime(),e=Math.abs(t-e);return{day:parseInt(e/1e3/60/60/24),hours:parseInt(e/1e3/60/60%24),min:parseInt(e/1e3/60%60),sec:parseInt(e/1e3%60)}}function getStyle(t,e){e=(window.getComputedStyle?window.getComputedStyle(t):t.currentStyle)[e];return e}function addEvent(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent("on"+e,i)}function animation(s,o,h){var r,a=0;for(r in o)!function(){a++;var t=r,e=o[r],i=void 0,n=void 0;clearInterval(s[t]),s[t]=setInterval(function(){i="opacity"==t?100*getStyle(s,t):parseInt(getStyle(s,t)),n=0<(n=(e-i)/10)?Math.ceil(n):Math.floor(n),e==(i+=n)&&(clearInterval(s[t]),a--),s.style[t]="opacity"==t?i/100:i+"px",0==a&&h&&h()},30)}()}var Drag=function(t){this.ele=t,this.init()};Drag.prototype={constructor:Drag,init:function(){var t=this;this.ele.onmousedown=function(){t.down()},document.onmouseup=this.up},down:function(){var t=this,e=window.event;this.x=e.offsetX,this.y=e.offsetY,document.onmousemove=function(){t.move()}},move:function(){var t=window.event,e=t.clientX-this.x,t=t.clientY-this.y;e<=0&&(e=0),t<=0&&(t=0),e>=innerWidth-this.ele.offsetWidth&&(e=innerWidth-this.ele.offsetWidth),t>=innerHeight-this.ele.offsetHeight&&(t=innerHeight-this.ele.offsetHeight),this.ele.style.left=e+"px",this.ele.style.top=t+"px"},up:function(){document.onmousemove=null}},Object.defineProperty(Drag.prototype,"constructor",{enumerable:!1});var Barrage=function(t,e){this.ele=t,this.text=e,this.color=randomColor(),this.fontSize=randomNumber(12,26),this.top=randomNumber(0,this.ele.offsetHeight-this.fontSize),this.speed=randomNumber(10,50),this.init()};Barrage.prototype={constructor:Barrage,init:function(){this.span=document.createElement("span"),this.span.classList.add("bar-item"),this.span.innerHTML=this.text,this.span.style.color=this.color,this.span.style.fontSize=this.fontSize+"px",this.span.style.top=this.top+"px",this.ele.appendChild(this.span),this.move()},move:function(){var e=this;this.timer=setInterval(function(){var t=parseInt(getStyle(e.span,"left"))-e.speed;t<=-e.span.offsetWidth&&(clearInterval(e.timer),e.remove()),animation(e.span,{left:t})},100)},remove:function(){this.span.remove()}},Object.defineProperty(Barrage.prototype,"constructor",{enumerable:!1});var GVerify=function(){function e(t){_classCallCheck(this,e),this.options={id:t.id,canvasId:t.canvasId||"verifyCanvas",width:t.width||"100",height:t.height||"30",type:t.type||"blend",length:t.length||4,code:"",numArr:[1,2,3,4,5,6,7,8,9,0]},this.options.letterArr=this.getAllLetter(),this.init(),this.refresh()}return _createClass(e,[{key:"init",value:function(){var t=this,e=document.getElementById(this.options.id),i=document.createElement("canvas");this.options.width=0<e.offsetWidth?e.offsetWidth:this.options.width,this.options.height=0<e.offsetHeight?e.offsetHeight:this.options.height,i.id=this.options.canvasId,i.width=this.options.width,i.height=this.options.height,i.style.cursor="pointer",i.innerHTML="您的浏览器版本不支持canvas",e.appendChild(i),i.onclick=function(){t.refresh()}}},{key:"refresh",value:function(){this.options.code="";var t=document.getElementById(this.options.canvasId);if(t.getContext){var e,i=t.getContext("2d");i.textBaseline="middle",i.fillStyle=this.randomColor(180,240),i.fillRect(0,0,this.options.width,this.options.height),e="blend"==this.options.type?this.options.numArr.concat(this.options.letterArr):"number"==this.options.type?this.options.numArr:this.options.letterArr;for(var n=1;n<=this.options.length;n++){var s=e[this.randomNum(0,e.length)];this.options.code+=s,i.font=this.randomNum(this.options.height/2,this.options.height)+"px SimHei",i.fillStyle=this.randomColor(50,160),i.shadowOffsetX=this.randomNum(-3,3),i.shadowOffsetY=this.randomNum(-3,3),i.shadowBlur=this.randomNum(-3,3),i.shadowColor="rgba(0, 0, 0, 0.3)";var o=this.options.width/(this.options.length+1)*n,h=this.options.height/2,r=this.randomNum(-30,30);i.translate(o,h),i.rotate(r*Math.PI/180),i.fillText(s,0,0),i.rotate(-r*Math.PI/180),i.translate(-o,-h)}for(n=0;n<this.options.length;n++)i.strokeStyle=this.randomColor(40,180),i.beginPath(),i.moveTo(this.randomNum(0,this.options.width),this.randomNum(0,this.options.height)),i.lineTo(this.randomNum(0,this.options.width),this.randomNum(0,this.options.height)),i.stroke();for(n=0;n<this.options.width/this.options.length;n++)i.fillStyle=this.randomColor(0,255),i.beginPath(),i.arc(this.randomNum(0,this.options.width),this.randomNum(0,this.options.height),1,0,2*Math.PI),i.fill()}}},{key:"validate",value:function(t){return(t=t.toLowerCase())==this.options.code.toLowerCase()}},{key:"getAllLetter",value:function(){return"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z".split(",")}},{key:"randomNum",value:function(t,e){return Math.floor(Math.random()*(e-t)+t)}},{key:"randomColor",value:function(t,e){return"rgb("+this.randomNum(t,e)+","+this.randomNum(t,e)+","+this.randomNum(t,e)+")"}}]),e}(),Enlarge=function(){function e(t){_classCallCheck(this,e),this.ele=document.querySelector(t),this.show=this.ele.querySelector(".show"),this.showImg=this.show.querySelector("img"),this.mask=this.show.querySelector(".mask"),this.btn=this.ele.querySelectorAll(".list p"),this.enlarge=this.ele.querySelector(".enlarge"),this.init()}return _createClass(e,[{key:"init",value:function(){var i=this;this.show.onmouseover=function(){i.mask.style.display=i.enlarge.style.display="block",i.setStyle()},this.show.onmouseout=function(){i.mask.style.display=i.enlarge.style.display="none"},this.show.onmousemove=function(){i.maskMove()},this.btn.forEach(function(e,t){e.onclick=function(){var t=window.event;i.changeImage(e,t.target)}})}},{key:"setStyle",value:function(){this.showWidth=this.show.offsetWidth,this.showHeight=this.show.offsetHeight,this.maskWidth=this.mask.offsetWidth,this.maskHeight=this.mask.offsetHeight;var t=getStyle(this.enlarge,"backgroundSize");this.styleX=parseInt(t.split(" ")[0]),this.styleY=parseInt(t.split(" ")[1]),this.enlargeWidth=this.maskWidth*this.styleX/this.showWidth,this.enlargeHeight=this.maskHeight*this.styleY/this.showHeight,this.enlarge.style.width=this.enlargeWidth+"px",this.enlarge.style.height=this.enlargeHeight+"px"}},{key:"maskMove",value:function(){var t=window.event,e=t.pageX-this.ele.offsetLeft,t=t.pageY-this.ele.offsetTop,e=e-this.maskWidth/2,t=t-this.maskHeight/2;e<=0&&(e=0),t<=0&&(t=0),e>=this.showWidth-this.maskWidth&&(e=this.showWidth-this.maskWidth),t>=this.showHeight-this.maskHeight&&(t=this.showHeight-this.maskHeight),this.mask.style.left=e+"px",this.mask.style.top=t+"px",this.enlargeMove(e,t)}},{key:"enlargeMove",value:function(t,e){t=t*this.styleX/this.showWidth,e=e*this.styleY/this.showHeight;this.enlarge.style.backgroundPosition=-t+"px "+-e+"px"}},{key:"changeImage",value:function(t,e){this.btn.forEach(function(t){t.classList.remove("active")}),t.classList.add("active");t=e.getAttribute("midelimg");this.showImg.src=t;e=e.getAttribute("bigimg");this.enlarge.style.backgroundImage="url("+e+")"}}]),e}(),Tab=function(){function i(t,e){_classCallCheck(this,i),this.ele=document.querySelector(t),this.btn=this.ele.querySelectorAll("ul li"),this.content=this.ele.querySelectorAll(".tab-content"),this.index=e&&e.index||0,this.init()}return _createClass(i,[{key:"init",value:function(){var i=this;this.btn[this.index].classList.add("active"),this.content[this.index].classList.add("current"),this.btn.forEach(function(t,e){console.log(t),t.onclick=function(){console.log(1),i.changeActive(t,e)}})}},{key:"changeActive",value:function(t,e){this.btn.forEach(function(t){return t.classList.remove("active")}),t.classList.add("active"),this.changeContent(e)}},{key:"changeContent",value:function(t){this.content.forEach(function(t){return t.classList.remove("current")}),this.content[t].classList.add("current")}}]),i}();