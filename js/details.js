"use strict";var reg=/id=(\d+)/;console.log(location.search),reg.test(location.search)||(location.href="../html/xie.html");var id=reg.exec(location.search)[1],container=document.querySelector(".container");function renderHtml(n){container.innerHTML='\n        <ol class="breadcrumb">\n            <li><a href="#">详情</a></li>\n        </ol>\n        <div class="show">\n            <img src="'+n.Pic+'">\n            <div class="mask"></div>\n            <div class="big"><img src="'+n.Pic+'" alt="" class="bigImg"></div>\n        </div>\n        <div class="media-body">\n            <h4 class="media-heading">'+n.name+'\n            </h4>\n            <div class="price">\n                <i class="glyphicon glyphicon-yen"></i>\n                <span>'+n.pie+'</span>\n            </div>\n            <div class="btn-group" role="group" aria-label="...">\n                <button type="button" class="btn btn-default">38</button>\n                <button type="button" class="btn btn-default">39</button>\n                <button type="button" class="btn btn-default">40</button>\n                <button type="button" class="btn btn-default">41</button>\n                <button type="button" class="btn btn-default">42</button>\n            </div>\n\n            <div>\n                <button class="btn btn-warning btn-lg" id="goCar">立即购买</button>\n                <button class="btn btn-danger btn-lg" id="addCar">加入购物车</button>\n            </div>\n        </div>'}pAjax({url:"../api/getDetail.php",data:{id:id}}).then(function(n){console.log(n),renderHtml(n.detail)}),container.onclick=function(){var n=window.event;if("goCar"==n.target.id&&(location.href="../html/car.html"),"addCar"==n.target.id){n=getCookie("login");if(!n)return location.href="../html/login.html",void localStorage.setItem("url","http://gz2008.com/xiangmu/html/detail.html?id="+id);pAjax({url:"../api/addCarData.php",data:{name:n,id:id}}).then(function(n){console.log(n)})}},$(".container").on("mouseover",".show",function(){$(".container").find(".mask").show(),$(".container").find(".big").show()}),$(".container").on("mouseout",".show",function(){$(".container").find(".mask").hide(),$(".container").find(".big").hide()}),$(".container").on("mousemove",".show",function(){var n=window.event,t=n.pageX-this.offsetLeft,i=n.pageY-this.offsetTop,o=t-$(".container").find(".mask").width()/2,n=i-$(".container").find(".mask").height()/2,t=$(".container").find(".show").width()-$(".container").find(".mask").width(),i=$(".container").find(".show").height()-$(".container").find(".mask").height();o<=0?o=0:t<=o&&(o=t),n<=0?n=0:i<=n&&(n=i),$(".container").find(".mask").css("left",o+"px"),$(".container").find(".mask").css("top",n+"px");t=o*($(".container").find(".bigImg").width()-$(".container").find(".big").width())/t,i=n*($(".container").find(".bigImg").height()-$(".container").find(".big").height())/i;$(".container").find(".bigImg").css("left",-t+"px"),$(".container").find(".bigImg").css("top",-i+"px")});